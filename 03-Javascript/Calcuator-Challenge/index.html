<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator Challenge</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main>
      <div class="grid-container keys" id="buttons">
        <button class="span four title" id="title">Calculator</button>
        <button class="number" value="0">0</button>
        <button class="number" value=".">.</button>
        <button class="clear" value="AC">AC</button>
        <button class="add operand" value="+">+</button>
        <button class="one number" value="1">1</button>
        <button class="two number" value="2" id="two">2</button>
        <button class="three number" value="3">3</button>
        <button class="minus operand" value="-">-</button>
        <button class="four number" value="4">4</button>
        <button class="five number" value="5">5</button>
        <button class="six number" value="6">6</button>
        <button class="multi operand" value="x">x</button>
        <button class="seven number" value="7">7</button>
        <button class="eight number" value="8">8</button>
        <button class="nine number" value="9">9</button>
        <button class="button operand" value="/">รท</button>
        <button class="text">Total</button>
        <button class="span two total" id="total" value="">test</button>
        <button id="equals" value="=">=</button>
      </div>
    </main>

    <script>
      // what do I want to happen
      // When user clicks on a number or operand it saves it & displays it
      // above needs to be limitless
      // When user clicks = the calculator needs to carry out the sum and display total
      // When user clicks AC display should reset back to 0

      //   Declare variables ////////////////////////////////////////////////////////////////////////////////
      //   empty array to push the values into
      const currentArray = [];

      //   display of sum and total
      const display = document.getElementById("total");
      const equals = document.getElementById("equals");

      //   taking active operand from user's entry
      let currentOperand = "";

      // selects all number buttons ////////////////////////////////////////////////////////////////////////////
      const buttons = document.querySelectorAll(".number");

      // loops through them all and adds an event listener that runs showNumber function when each button is clicked
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener("click", showNumber);
      }

      // adds the button's value to the display box on click
      function showNumber(event) {
        currentArray.push(event.target.value);
        display.innerHTML = currentArray.join("");
      }

      // Same as above for operands /////////////////////////////////////////////////////////////////////////
      const operands = document.querySelectorAll(".operand");
      for (var i = 0; i < operands.length; i++) {
        operands[i].addEventListener("click", showOperand);
      }

      function showOperand(event) {
        //   adding operand selected to the array in display
        currentArray.push(event.target.value);
        display.innerHTML = currentArray.join("");

        // Selecting just the operand ///////////////////////////////////////////////////////////////////////

        // want to filter the currentArray to find any operands, and store in new array
        let finalOperand = currentArray.filter((currentArray) => {
          return currentArray === event.target.value;
        });
        console.log(finalOperand);

        //   Searching for first number, and store in new array
        //     currentNumber1 = currentArray[0];
        //     console.log(currentNumber1);

        //     //   Searching for last number, and store in new array
        //     currentNumber2 = currentArray.length - 1;
        //     console.log(currentNumber2);
        //
      }

      // equals button to action the equation ///////////////////////////////////////////////
      // add click event
      equals.addEventListener("click", calculateTotal);

      //   create sum and enter as 0;
      let sum = 0;

      //   function to split the array into strings of numbers then puts them in a new array //////////////////////
      //   Couldn't perform this before as it wouldn't take the final entered value
      function calculateTotal(event) {
        //   turns array into a string so it can be split
        let addArray = currentArray.toString();

        // split the array when you find +, leaving just numbers
        addArray = addArray.split("+");
        console.log(addArray);

        // trying to add it all together!
        sum =
          parseInt(addArray[0]) +
          currentOperand +
          parseInt(addArray.length - 1);

        console.log(sum);
      }

      // Add function to clear *needs fixing //////////////////////////////////////////////////////////////////
      document.querySelector(".clear").addEventListener("click", clear);
      function clear(event) {
        document.getElementById("total").innerHTML = "0";
      }
    </script>
  </body>
</html>
